<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Simulator - AI Healthcare Monitoring System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/simulator.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-heartbeat"></i> AI Healthcare Monitoring System</h1>
            <nav>
                <ul>
                    <li><a href="/">Dashboard</a></li>
                    <li><a href="/history">History</a></li>
                    <li><a href="/settings">Settings</a></li>
                    <li><a href="/simulator" class="active">Simulator</a></li>
                    <li><a href="/explainable-ai" >Explainable AI</a></li>
                    <li><a href="/documentation">Documentation</a></li>
                </ul>
            </nav>
        </header>
        
        <div class="simulator-container">
            <div class="simulator-header">
                <h2><i class="fas fa-flask"></i> Patient Scenario Simulator</h2>
                <p>Test the AI monitoring system with realistic patient scenarios or create your own.</p>
            </div>
            
            <div class="simulator-content">
                <div class="scenario-controls">
                    <div class="scenario-selector">
                        <h3>Patient Scenarios</h3>
                        <div class="scenario-cards" id="scenario-cards">
                            <!-- Scenario cards will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="simulator-actions">
                        <div class="time-controls">
                            <h3>Simulation Speed</h3>
                            <div class="time-control-buttons">
                                <button id="speed-slow" class="btn btn-small"><i class="fas fa-play"></i> 0.5x</button>
                                <button id="speed-normal" class="btn btn-small btn-primary"><i class="fas fa-play"></i> 1x</button>
                                <button id="speed-fast" class="btn btn-small"><i class="fas fa-forward"></i> 2x</button>
                                <button id="speed-very-fast" class="btn btn-small"><i class="fas fa-fast-forward"></i> 5x</button>
                            </div>
                        </div>
                        
                        <div class="master-controls">
                            <button id="start-simulation" class="btn btn-primary"><i class="fas fa-play"></i> Start Simulation</button>
                            <button id="pause-simulation" class="btn btn-secondary" disabled><i class="fas fa-pause"></i> Pause</button>
                            <button id="reset-simulation" class="btn btn-secondary" disabled><i class="fas fa-undo"></i> Reset</button>
                        </div>
                    </div>
                </div>
                
                <div class="manual-controls">
                    <h3>Manual Vitals Control</h3>
                    <p class="control-instruction">Adjust the sliders to manually override vital signs</p>
                    
                    <div class="vital-controls">
                        <div class="vital-control">
                            <label for="heart-rate-control">
                                <i class="fas fa-heartbeat"></i> Heart Rate
                                <span class="control-value" id="heart-rate-value">75 BPM</span>
                            </label>
                            <input type="range" id="heart-rate-control" min="40" max="180" value="75" class="slider">
                            <div class="range-labels">
                                <span>40</span>
                                <span>180</span>
                            </div>
                        </div>
                        
                        <div class="vital-control">
                            <label for="systolic-control">
                                <i class="fas fa-stethoscope"></i> Systolic BP
                                <span class="control-value" id="systolic-value">120 mmHg</span>
                            </label>
                            <input type="range" id="systolic-control" min="70" max="200" value="120" class="slider">
                            <div class="range-labels">
                                <span>70</span>
                                <span>200</span>
                            </div>
                        </div>
                        
                        <div class="vital-control">
                            <label for="diastolic-control">
                                <i class="fas fa-stethoscope"></i> Diastolic BP
                                <span class="control-value" id="diastolic-value">80 mmHg</span>
                            </label>
                            <input type="range" id="diastolic-control" min="40" max="120" value="80" class="slider">
                            <div class="range-labels">
                                <span>40</span>
                                <span>120</span>
                            </div>
                        </div>
                        
                        <div class="vital-control">
                            <label for="respiratory-control">
                                <i class="fas fa-lungs"></i> Respiratory Rate
                                <span class="control-value" id="respiratory-value">16 breaths/min</span>
                            </label>
                            <input type="range" id="respiratory-control" min="8" max="40" value="16" class="slider">
                            <div class="range-labels">
                                <span>8</span>
                                <span>40</span>
                            </div>
                        </div>
                        
                        <div class="vital-control">
                            <label for="oxygen-control">
                                <i class="fas fa-wind"></i> Oxygen Saturation
                                <span class="control-value" id="oxygen-value">98 %</span>
                            </label>
                            <input type="range" id="oxygen-control" min="70" max="100" value="98" class="slider">
                            <div class="range-labels">
                                <span>70</span>
                                <span>100</span>
                            </div>
                        </div>
                        
                        <div class="vital-control">
                            <label for="temperature-control">
                                <i class="fas fa-thermometer-half"></i> Temperature
                                <span class="control-value" id="temperature-value">98.6 °F</span>
                            </label>
                            <input type="range" id="temperature-control" min="94" max="104" value="98.6" step="0.1" class="slider">
                            <div class="range-labels">
                                <span>94</span>
                                <span>104</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ecg-control">
                        <label for="ecg-pattern">ECG Pattern</label>
                        <select id="ecg-pattern">
                            <option value="normal">Normal Sinus Rhythm</option>
                            <option value="tachycardia">Tachycardia</option>
                            <option value="bradycardia">Bradycardia</option>
                            <option value="afib">Atrial Fibrillation</option>
                            <option value="pvc">PVC</option>
                            <option value="st_elevation">ST Elevation</option>
                        </select>
                    </div>
                    
                    <div class="control-buttons">
                        <button id="apply-vitals" class="btn btn-primary">Apply Changes</button>
                        <button id="reset-vitals" class="btn btn-secondary">Reset to Default</button>
                    </div>
                </div>
                
                <div class="visual-monitor">
                    <h3>Live Monitoring Display</h3>
                    
                    <div class="monitor-panels">
                        <div class="monitor-panel">
                            <h4>Vital Signs</h4>
                            <div class="vitals-display">
                                <div class="vital-display">
                                    <span class="vital-label">HR:</span>
                                    <span class="vital-display-value" id="monitor-hr">-- BPM</span>
                                </div>
                                <div class="vital-display">
                                    <span class="vital-label">BP:</span>
                                    <span class="vital-display-value" id="monitor-bp">--/-- mmHg</span>
                                </div>
                                <div class="vital-display">
                                    <span class="vital-label">O₂:</span>
                                    <span class="vital-display-value" id="monitor-o2">-- %</span>
                                </div>
                                <div class="vital-display">
                                    <span class="vital-label">Resp:</span>
                                    <span class="vital-display-value" id="monitor-resp">-- bpm</span>
                                </div>
                                <div class="vital-display">
                                    <span class="vital-label">Temp:</span>
                                    <span class="vital-display-value" id="monitor-temp">-- °F</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="monitor-panel">
                            <h4>ECG</h4>
                            <div class="ecg-display">
                                <canvas id="monitor-ecg"></canvas>
                            </div>
                        </div>
                        
                        <div class="monitor-panel">
                            <h4>Risk Assessment</h4>
                            <div class="risk-display">
                                <div class="risk-meter">
                                    <div class="risk-bar">
                                        <div class="risk-fill" id="monitor-risk-fill"></div>
                                    </div>
                                    <div class="risk-value" id="monitor-risk-value">--%</div>
                                </div>
                                <div class="risk-factors" id="monitor-risk-factors">
                                    <p>No risk factors detected</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="simulator-info">
                <div class="clinical-explanation">
                    <h3>Clinical Insights</h3>
                    <div class="explanation-content" id="clinical-explanation">
                        <p>Select a scenario or adjust vitals to see clinical explanations here.</p>
                    </div>
                </div>
                
                <div class="ai-explanation">
                    <h3>AI Analysis Explanation</h3>
                    <div class="explanation-content" id="ai-explanation">
                        <p>Select a scenario to see AI insights and detection patterns.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>AI Healthcare Monitoring System - Using Advanced ML for Patient Safety</p>
    </footer>
    
    <script src="{{ url_for('static', filename='js/scenario_definitions.js') }}"></script>
    <script src="{{ url_for('static', filename='js/simulator.js') }}"></script>
</body>
</html>